<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Groovy 对比 Java：创建并初始化 Map｜六开箱</title><meta name=keywords content="Groovy,Java,Map,教程"><meta name=description content="Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字key和值value为任意类型，只要继承了 Object 类即可。"><meta name=author content="六开箱"><link rel=canonical href=https://lkxed.github.io/posts/creating-maps-groovy-java/><link crossorigin=anonymous href=/assets/css/stylesheet.min.09b98575a0a9c52a0dcff6660328188f9365049be8c47253f3072a85d10d82a5.css integrity="sha256-CbmFdaCpxSoNz/ZmAygYj5NlBJvoxHJT8wcqhdENgqU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://lkxed.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lkxed.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://lkxed.github.io/favicon-32x32.png><link rel=manifest href=https://lkxed.github.io/site.webmanifest><link rel=apple-touch-icon href=https://lkxed.github.io/apple-touch-icon.png><link rel=mask-icon href=https://lkxed.github.io/safari-pinned-tab.svg><meta name=theme-color content="#f5f5f5" media="(prefers-color-scheme: light)"><meta name=theme-color content="#1d1e20" media="(prefers-color-scheme: dark)"><meta name=msapplication-TileColor content="#ffffff"><noscript><style>.top-link{display:none}</style></noscript><meta name=shenma-site-verification content="0834e815906a93375245a759f409f8b0_1648880760"><meta name=baidu-site-verification content="code-2I1Hg4GETM"><meta name=google-site-verification content="xBkkt93v_nso_R-2aQ-An4rbc_Gi_4rNFi8oBEKDNjc"><meta property="og:title" content="Groovy 对比 Java：创建并初始化 Map"><meta property="og:description" content="Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字key和值value为任意类型，只要继承了 Object 类即可。"><meta property="og:type" content="article"><meta property="og:url" content="https://lkxed.github.io/posts/creating-maps-groovy-java/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-21T09:25:59+08:00"><meta property="article:modified_time" content="2022-03-21T09:25:59+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Groovy 对比 Java：创建并初始化 Map"><meta name=twitter:description content="Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字key和值value为任意类型，只要继承了 Object 类即可。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://lkxed.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Groovy 对比 Java：创建并初始化 Map","item":"https://lkxed.github.io/posts/creating-maps-groovy-java/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Groovy 对比 Java：创建并初始化 Map","name":"Groovy 对比 Java：创建并初始化 Map","description":"Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字key和值value为任意类型，只要继承了 Object 类即可。","keywords":["Groovy","Java","Map","教程"],"articleBody":" Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字key和值value为任意类型，只要继承了 Object 类即可。\n 前言 我最近在探索 Java 与 Groovy 在 创建并初始化列表List 和 在运行时构建列表List 方面的一些差异。我观察到，就实现这些功能而言，Groovy 的简洁和 Java 的繁复形成了鲜明对比。\n在这篇文章中，我将实现在 Java 和 Groovy 中创建并初始化 Map。Map 为开发支持根据 关键字key 检索的结构提供了可能，如果找到了这样一个关键字，它就会返回对应的 值value。今天，很多编程语言都实现了 Map ，其中包括 Java 和 Groovy，也包括了 Python（它将 Map 称为 字典dict）、Perl、awk 以及许多其他语言。另一个经常被用来描述 Map 的术语是 关联数组associative array，你可以在 这篇维基百科文章 中了解更多。Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字和值为任意类型，只要继承了 Object 类即可。\n安装 Java 和 Groovy Groovy 基于 Java，因此你需要先安装 Java。你的 Linux 发行版的仓库中可能有最近的比较好的 Java 和 Groovy 版本。或者，你也可以在根据上面链接中的指示来安装 Groovy。对于 Linux 用户来说，SDKMan 是一个不错的代替选项，你可以使用它来获取多个 Java 和 Groovy 版本，以及许多其他的相关工具。在这篇文章中，我使用的 SDK 发行版是：\n Java: version 11.0.12-open of OpenJDK 11; Groovy: version 3.0.8.  言归正传 Java 提供了非常多的方式来实例化和初始化 Map ，并且从 Java 9 之后，添加了一些新的方式。其中最明显的方式就是使用 java.util.Map.of() 这个静态方法，下面介绍如何使用它：\nvar m1 = Map.of( \"AF\", \"Afghanistan\", \"AX\", \"Åland Islands\", \"AL\", \"Albania\", \"DZ\", \"Algeria\", \"AS\", \"American Samoa\", \"AD\", \"Andorra\", \"AO\", \"Angola\", \"AI\", \"Anguilla\", \"AQ\", \"Antarctica\"); System.out.println(\"m1 = \" + m1); System.out.println(\"m1 is an instance of \" + m1.getClass()); 事实证明，在此种情况下，Map.of() 有两个重要的限制。其一，这样创建出来的 Map 实例是不可变的immutable。其二，你最多只能提供 20 个参数，用来表示 10 个键值对key-value pair。\n你可以尝试着添加第 10 对和第 11 对，比方说 \"AG\", \"Antigua and Barbuda\" 和 \"AR\", \"Argentina\"，然后观察会发生什么。你将发现 Java 编译器尝试寻找一个支持 11 个键值对的 Map.of() 方法而遭遇失败。\n快速查看 java.util.Map 类的文档 ，你就会找到上述第二个限制的原因，以及解决这个难题的一种方式：\nvar m2 = Map.ofEntries( Map.entry(\"AF\", \"Afghanistan\"), Map.entry(\"AX\", \"Åland Islands\"), Map.entry(\"AL\", \"Albania\"), Map.entry(\"DZ\", \"Algeria\"), Map.entry(\"AS\", \"American Samoa\"), Map.entry(\"AD\", \"Andorra\"), Map.entry(\"AO\", \"Angola\"), Map.entry(\"AI\", \"Anguilla\"), Map.entry(\"AQ\", \"Antarctica\"), Map.entry(\"AG\", \"Antigua and Barbuda\"), Map.entry(\"AR\", \"Argentina\"), Map.entry(\"AM\", \"Armenia\"), Map.entry(\"AW\", \"Aruba\"), Map.entry(\"AU\", \"Australia\"), Map.entry(\"AT\", \"Austria\"), Map.entry(\"AZ\", \"Azerbaijan\"), Map.entry(\"BS\", \"Bahamas\"), Map.entry(\"BH\", \"Bahrain\"), Map.entry(\"BD\", \"Bangladesh\"), Map.entry(\"BB\", \"Barbados\") ); System.out.println(\"m2 = \" + m2); System.out.println(\"m2 is an instance of \" + m2.getClass()); 这就是一个比较好的解决方式，前提是我不在随后的代码里改变使用 Map.ofEntries() 创建并初始化的 Map 内容。注意，我在上面使用了 Map.ofEntries() 来代替 Map.of()。\n然而，假设我想要创建并初始化一个非空的 Map ，随后往这个 Map 中添加数据，我需要这样做：\nvar m3 = new HashMapString,String(Map.ofEntries( Map.entry(\"AF\", \"Afghanistan\"), Map.entry(\"AX\", \"Åland Islands\"), Map.entry(\"AL\", \"Albania\"), Map.entry(\"DZ\", \"Algeria\"), Map.entry(\"AS\", \"American Samoa\"), Map.entry(\"AD\", \"Andorra\"), Map.entry(\"AO\", \"Angola\"), Map.entry(\"AI\", \"Anguilla\"), Map.entry(\"AQ\", \"Antarctica\"), Map.entry(\"AG\", \"Antigua and Barbuda\"), Map.entry(\"AR\", \"Argentina\"), Map.entry(\"AM\", \"Armenia\"), Map.entry(\"AW\", \"Aruba\"), Map.entry(\"AU\", \"Australia\"), Map.entry(\"AT\", \"Austria\"), Map.entry(\"AZ\", \"Azerbaijan\"), Map.entry(\"BS\", \"Bahamas\"), Map.entry(\"BH\", \"Bahrain\"), Map.entry(\"BD\", \"Bangladesh\"), Map.entry(\"BB\", \"Barbados\") )); System.out.println(\"m3 = \" + m3); System.out.println(\"m3 is an instance of \" + m3.getClass()); m3.put(\"BY\", \"Belarus\"); System.out.println(\"BY: \" + m3.get(\"BY\")); 这里，我把使用 Map.ofEntries() 创建出来的不可变 Map 作为 HashMap 的一个构造参数，以此创建了该 Map 的一个可变副本mutable copy，之后我就可以修改它 —— 比如使用 put() 方法。\n让我们来看看上述过程如何用 Groovy 来实现：\ndef m1 = [ \"AF\": \"Afghanistan\", \"AX\": \"Åland Islands\", \"AL\": \"Albania\", \"DZ\": \"Algeria\", \"AS\": \"American Samoa\", \"AD\": \"Andorra\", \"AO\": \"Angola\", \"AI\": \"Anguilla\", \"AQ\": \"Antarctica\", \"AG\": \"Antigua and Barbuda\", \"AR\": \"Argentina\", \"AM\": \"Armenia\", \"AW\": \"Aruba\", \"AU\": \"Australia\", \"AT\": \"Austria\", \"AZ\": \"Azerbaijan\", \"BS\": \"Bahamas\", \"BH\": \"Bahrain\", \"BD\": \"Bangladesh\", \"BB\": \"Barbados\"] println \"m1 = $m1\" println \"m1 is an instance of ${m1.getClass()}\" m1[\"BY\"] = \"Belarus\" println \"m1 = $m1\" 只看一眼，你就会发现 Groovy 使用了 def 关键字而不是 var —— 尽管在最近模型late-model的 Groovy（version 3+）中，使用 var 关键字也是可行的。\n你还会发现，你是通过在括号里添加了一个键值对列表来创建一个 Map 的。不仅如此，这样创建的列表对象还非常有用，这里有几个原因。其一，它是可变的；其二，它是一个 LinkedHashMap 的实例，内部维持了数据的插入顺序。所以，当你运行 Java 版本的代码并打印出变量 m3，你会看到：\nm3 = {BB=Barbados, BD=Bangladesh, AD=Andorra, AF=Afghanistan, AG=Antigua and Barbuda, BH=Bahrain, AI=Anguilla, AL=Albania, AM=Armenia, AO=Angola, AQ=Antarctica, BS=Bahamas, AR=Argentina, AS=American Samoa, AT=Austria, AU=Australia, DZ=Algeria, AW=Aruba, AX=Åland Islands, AZ=Azerbaijan} 而当你运行 Groovy 版本的代码，你会看到：\nm1 = [AF:Afghanistan, AX:Åland Islands, AL:Albania, DZ:Algeria, AS:American Samoa, AD:Andorra, AO:Angola, AI:Anguilla, AQ:Antarctica, AG:Antigua and Barbuda, AR:Argentina, AM:Armenia, AW:Aruba, AU:Australia, AT:Austria, AZ:Azerbaijan, BS:Bahamas, BH:Bahrain, BD:Bangladesh, BB:Barbados] 再一次，你将看到 Groovy 是如何简化事情的。这样的语法非常直观，有点像 Python 里的字典，并且，即使你有一个超过 10 个键值对的初始列表，你也不需要去记住各种必要的别扭方式。注意我们使用的表达式：\nm1[\"BY\"] = \"Belarus\" 而在 Java 中，你需要这样做：\nm1.put(\"BY\", \"Belarus\") 还有，这个 Map 默认是可变的，这么做的利弊很难评判，还是得取决于你的需求是什么。我个人觉得，Java 在这种情况下的 “默认不可变” 机制，最让我困扰的地方是，它没有一个类似于 Map.mutableOfMutableEntries() 的方法。这迫使一些刚学会如何声明和初始化一个 Map 的程序员，不得不转念去思考该如何把他们手中不可变的 Map，转换为可变的。同时我也想问，创建一个不可变的对象然后再舍弃它，这样真的好吗？\n另一个值得考虑的事情是，Groovy 使用方括号代替 Java 中的 put() 和 get() 方法来进行关键字查找。因此你可以这样写：\nm1[\"ZZ\"] = m1[\"BY\"] 而不需要这样写：\nm1.put(\"ZZ\",m1.get(\"BY\")) 有时候，就像使用某个类的实例变量一样来使用 Map 中的关键字和值是一个好办法。设想你现在有一堆想要设置的属性，在 Groovy 中，它们看起来就像下面这样：\ndef properties = [ verbose: true, debug: false, logging: false] 然后，你可以改变其中的某个属性，就像下面这样：\nproperties.verbose = false 之所以这样能工作，是因为，只要关键字符合特定的规则，你就可以省略引号，然后直接用点操作符来代替方括号。尽管这个功能非常有用，也非常好用，它也同时也意味着，如果你要把一个变量作为一个 Map 的关键字来使用，你就必须把这个变量包裹在圆括号里，就像下面这样：\ndef myMap = [(k1): v1, (k2): v2] 是时候告诉勤奋的读者 Groovy 是一门为编写脚本而量身定制的语言了。 Map 通常是脚本中的关键元素，它为脚本提供了查找表lookup table，并且通常起到了作为内存数据库的作用。我在这里使用的例子是 ISO 3166 规定的两个字母的国家代码和国家名称。对在世界上各个国家的互联网使用者来说，这些代码是很熟悉的。此外，假设我们要编写一个从日志文件中查找互联网主机名，并借此来了解用户的地理位置分布的脚本工具，那么这些代码会是十分有用的部分。\nGroovy 相关资源 Apache Groovy 网站 上有非常多的文档。另一个很棒的 Groovy 资源是 Mr. Haki 。Baeldung 网站 提供了大量 Java 和 Groovy 的有用教程。学习 Groovy 还有一个很棒的原因，那就是可以接着学习 Grails ，后者是一个优秀的、高效率的全栈 Web 框架。它基于许多优秀组件构建而成，比如有 Hibernate、Spring Boot 和 Micronaut 等。\n  本文使用 CC BY-SA 4.0 国际协议 进行许可，欢迎遵照协议规定转载。\n链接：https://lkxed.github.io/posts/creating-maps-groovy-java/ 作者：Chris Hermansen / 译者：六开箱 原文：Creating and initializing maps in Groovy vs Java 首发：在 Groovy 和 Java 中创建并初始化 Map 的不同 @ Linux 中国  ","wordCount":"2630","inLanguage":"zh","datePublished":"2022-03-21T09:25:59+08:00","dateModified":"2022-03-21T09:25:59+08:00","author":{"@type":"Person","name":"六开箱"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lkxed.github.io/posts/creating-maps-groovy-java/"},"publisher":{"@type":"Organization","name":"六开箱","logo":{"@type":"ImageObject","url":"https://lkxed.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://lkxed.github.io/ accesskey=h title="六开箱 (Alt + H)"><img src=https://lkxed.github.io/favicon.ico alt=logo aria-label=logo height=30>六开箱</a></div><ul id=menu><li><a href=https://lkxed.github.io/posts/ title=文章><span>文章</span></a></li><li><a href=https://lkxed.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://lkxed.github.io/series/ title=系列><span>系列</span></a></li><li><a href=https://lkxed.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://lkxed.github.io/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Groovy 对比 Java：创建并初始化 Map</h1><div class=post-meta><span title="2022-03-21 09:25:59 +0800 CST">2022 年 3 月 21 日 09:25</span>&nbsp;·&nbsp;2630 字&nbsp;·&nbsp;六开箱&nbsp;｜&nbsp;<a href=https://github.com/lkxed/ rel="noopener noreferrer" target=_blank>关注我🌟</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e5%ae%89%e8%a3%85-java-%e5%92%8c-groovy aria-label="安装 Java 和 Groovy">安装 Java 和 Groovy</a></li><li><a href=#%e8%a8%80%e5%bd%92%e6%ad%a3%e4%bc%a0 aria-label=言归正传>言归正传</a></li><li><a href=#groovy-%e7%9b%b8%e5%85%b3%e8%b5%84%e6%ba%90 aria-label="Groovy 相关资源">Groovy 相关资源</a></li></ul></div></details></div><div class=post-content><blockquote><p>Java 和 Groovy 中的 Map 都是非常通用的，它允许<ruby>关键字<rt>key</rt></ruby>和<ruby>值<rt>value</rt></ruby>为任意类型，只要继承了 <code>Object</code> 类即可。</p></blockquote><p><img loading=lazy src=https://img.linux.net.cn/data/attachment/album/202203/21/092532ykbhkq36vbr3bpzg.jpg alt></p><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>我最近在探索 Java 与 Groovy 在 <a href=https://opensource.com/article/22/1/creating-lists-groovy-java target=_blank rel="noopener noreferrer">创建并初始化<ruby>列表<rt>List</rt></ruby></a>
和 <a href=https://opensource.com/article/22/2/accumulating-lists-groovy-vs-java target=_blank rel="noopener noreferrer">在运行时构建<ruby>列表<rt>List</rt></ruby></a>
方面的一些差异。我观察到，就实现这些功能而言，Groovy 的简洁和 Java 的繁复形成了鲜明对比。</p><p>在这篇文章中，我将实现在 Java 和 Groovy 中创建并初始化 Map。Map 为开发支持根据 <ruby>关键字<rt>key</rt></ruby> 检索的结构提供了可能，如果找到了这样一个关键字，它就会返回对应的 <ruby>值<rt>value</rt></ruby>。今天，很多编程语言都实现了 Map ，其中包括 Java 和 Groovy，也包括了 Python（它将 Map 称为 <ruby>字典<rt>dict</rt></ruby>）、Perl、awk 以及许多其他语言。另一个经常被用来描述 Map 的术语是 <ruby>关联数组<rt>associative array</rt></ruby>，你可以在 <a href=https://en.wikipedia.org/wiki/Associative_array target=_blank rel="noopener noreferrer">这篇维基百科文章</a>
中了解更多。Java 和 Groovy 中的 Map 都是非常通用的，它允许关键字和值</rt></ruby>为任意类型，只要继承了 <code>Object</code> 类即可。</p><h2 id=安装-java-和-groovy>安装 Java 和 Groovy<a hidden class=anchor aria-hidden=true href=#安装-java-和-groovy>#</a></h2><p>Groovy 基于 Java，因此你需要先安装 Java。你的 Linux 发行版的仓库中可能有最近的比较好的 Java 和 Groovy 版本。或者，你也可以在根据上面链接中的指示来安装 Groovy。对于 Linux 用户来说，<a href=https://sdkman.io/ target=_blank rel="noopener noreferrer">SDKMan</a>
是一个不错的代替选项，你可以使用它来获取多个 Java 和 Groovy 版本，以及许多其他的相关工具。在这篇文章中，我使用的 SDK 发行版是：</p><ul><li>Java: version 11.0.12-open of OpenJDK 11;</li><li>Groovy: version 3.0.8.</li></ul><h2 id=言归正传>言归正传<a hidden class=anchor aria-hidden=true href=#言归正传>#</a></h2><p>Java 提供了非常多的方式来实例化和初始化 Map ，并且从 Java 9 之后，添加了一些新的方式。其中最明显的方式就是使用 <code>java.util.Map.of()</code> 这个静态方法，下面介绍如何使用它：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>m1</span> <span class=o>=</span> <span class=n>Map</span><span class=o>.</span><span class=na>of</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AF&#34;</span><span class=o>,</span> <span class=s>&#34;Afghanistan&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AX&#34;</span><span class=o>,</span> <span class=s>&#34;Åland Islands&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AL&#34;</span><span class=o>,</span> <span class=s>&#34;Albania&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;DZ&#34;</span><span class=o>,</span> <span class=s>&#34;Algeria&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AS&#34;</span><span class=o>,</span> <span class=s>&#34;American Samoa&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AD&#34;</span><span class=o>,</span> <span class=s>&#34;Andorra&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AO&#34;</span><span class=o>,</span> <span class=s>&#34;Angola&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AI&#34;</span><span class=o>,</span> <span class=s>&#34;Anguilla&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;AQ&#34;</span><span class=o>,</span> <span class=s>&#34;Antarctica&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m1 = &#34;</span> <span class=o>+</span> <span class=n>m1</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m1 is an instance of &#34;</span> <span class=o>+</span> <span class=n>m1</span><span class=o>.</span><span class=na>getClass</span><span class=o>());</span>
</span></span></code></pre></div><p>事实证明，在此种情况下，<code>Map.of()</code> 有两个重要的限制。其一，这样创建出来的 Map 实例是<ruby>不可变的<rt>immutable</rt></ruby>。其二，你最多只能提供 20 个参数，用来表示 10 个<ruby>键值对<rt>key-value pair</rt></ruby>。</p><p>你可以尝试着添加第 10 对和第 11 对，比方说 <code>"AG", "Antigua and Barbuda"</code> 和 <code>"AR", "Argentina"</code>，然后观察会发生什么。你将发现 Java 编译器尝试寻找一个支持 11 个键值对的 <code>Map.of()</code> 方法而遭遇失败。</p><p>快速查看 <a href=https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html target=_blank rel="noopener noreferrer">java.util.Map 类的文档</a>
，你就会找到上述第二个限制的原因，以及解决这个难题的一种方式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>m2</span> <span class=o>=</span> <span class=n>Map</span><span class=o>.</span><span class=na>ofEntries</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AF&#34;</span><span class=o>,</span> <span class=s>&#34;Afghanistan&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AX&#34;</span><span class=o>,</span> <span class=s>&#34;Åland Islands&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AL&#34;</span><span class=o>,</span> <span class=s>&#34;Albania&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;DZ&#34;</span><span class=o>,</span> <span class=s>&#34;Algeria&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AS&#34;</span><span class=o>,</span> <span class=s>&#34;American Samoa&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AD&#34;</span><span class=o>,</span> <span class=s>&#34;Andorra&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AO&#34;</span><span class=o>,</span> <span class=s>&#34;Angola&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AI&#34;</span><span class=o>,</span> <span class=s>&#34;Anguilla&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AQ&#34;</span><span class=o>,</span> <span class=s>&#34;Antarctica&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AG&#34;</span><span class=o>,</span> <span class=s>&#34;Antigua and Barbuda&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AR&#34;</span><span class=o>,</span> <span class=s>&#34;Argentina&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AM&#34;</span><span class=o>,</span> <span class=s>&#34;Armenia&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AW&#34;</span><span class=o>,</span> <span class=s>&#34;Aruba&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AU&#34;</span><span class=o>,</span> <span class=s>&#34;Australia&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AT&#34;</span><span class=o>,</span> <span class=s>&#34;Austria&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AZ&#34;</span><span class=o>,</span> <span class=s>&#34;Azerbaijan&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BS&#34;</span><span class=o>,</span> <span class=s>&#34;Bahamas&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BH&#34;</span><span class=o>,</span> <span class=s>&#34;Bahrain&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BD&#34;</span><span class=o>,</span> <span class=s>&#34;Bangladesh&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BB&#34;</span><span class=o>,</span> <span class=s>&#34;Barbados&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>);</span>
</span></span><span class=line><span class=cl>       
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m2 = &#34;</span> <span class=o>+</span> <span class=n>m2</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m2 is an instance of &#34;</span> <span class=o>+</span> <span class=n>m2</span><span class=o>.</span><span class=na>getClass</span><span class=o>());</span>
</span></span></code></pre></div><p>这就是一个比较好的解决方式，前提是我不在随后的代码里改变使用 <code>Map.ofEntries()</code> 创建并初始化的 Map 内容。注意，我在上面使用了 <code>Map.ofEntries()</code> 来代替 <code>Map.of()</code>。</p><p>然而，假设我想要创建并初始化一个非空的 Map ，随后往这个 Map 中添加数据，我需要这样做：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>var</span> <span class=n>m3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;(</span><span class=n>Map</span><span class=o>.</span><span class=na>ofEntries</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AF&#34;</span><span class=o>,</span> <span class=s>&#34;Afghanistan&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AX&#34;</span><span class=o>,</span> <span class=s>&#34;Åland Islands&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AL&#34;</span><span class=o>,</span> <span class=s>&#34;Albania&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;DZ&#34;</span><span class=o>,</span> <span class=s>&#34;Algeria&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AS&#34;</span><span class=o>,</span> <span class=s>&#34;American Samoa&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AD&#34;</span><span class=o>,</span> <span class=s>&#34;Andorra&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AO&#34;</span><span class=o>,</span> <span class=s>&#34;Angola&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AI&#34;</span><span class=o>,</span> <span class=s>&#34;Anguilla&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AQ&#34;</span><span class=o>,</span> <span class=s>&#34;Antarctica&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AG&#34;</span><span class=o>,</span> <span class=s>&#34;Antigua and Barbuda&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AR&#34;</span><span class=o>,</span> <span class=s>&#34;Argentina&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AM&#34;</span><span class=o>,</span> <span class=s>&#34;Armenia&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AW&#34;</span><span class=o>,</span> <span class=s>&#34;Aruba&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AU&#34;</span><span class=o>,</span> <span class=s>&#34;Australia&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AT&#34;</span><span class=o>,</span> <span class=s>&#34;Austria&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;AZ&#34;</span><span class=o>,</span> <span class=s>&#34;Azerbaijan&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BS&#34;</span><span class=o>,</span> <span class=s>&#34;Bahamas&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BH&#34;</span><span class=o>,</span> <span class=s>&#34;Bahrain&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BD&#34;</span><span class=o>,</span> <span class=s>&#34;Bangladesh&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;BB&#34;</span><span class=o>,</span> <span class=s>&#34;Barbados&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m3 = &#34;</span> <span class=o>+</span> <span class=n>m3</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;m3 is an instance of &#34;</span> <span class=o>+</span> <span class=n>m3</span><span class=o>.</span><span class=na>getClass</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>m3</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;BY&#34;</span><span class=o>,</span> <span class=s>&#34;Belarus&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;BY: &#34;</span> <span class=o>+</span> <span class=n>m3</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;BY&#34;</span><span class=o>));</span>
</span></span></code></pre></div><p>这里，我把使用 <code>Map.ofEntries()</code> 创建出来的不可变 Map 作为 <code>HashMap</code> 的一个构造参数，以此创建了该 Map 的一个<ruby>可变副本<rt>mutable copy</rt></ruby>，之后我就可以修改它 —— 比如使用 <code>put()</code> 方法。</p><p>让我们来看看上述过程如何用 Groovy 来实现：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=kt>def</span> <span class=n>m1</span> <span class=o>=</span> <span class=o>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AF&#34;</span><span class=o>:</span> <span class=s2>&#34;Afghanistan&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AX&#34;</span><span class=o>:</span> <span class=s2>&#34;Åland Islands&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AL&#34;</span><span class=o>:</span> <span class=s2>&#34;Albania&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;DZ&#34;</span><span class=o>:</span> <span class=s2>&#34;Algeria&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AS&#34;</span><span class=o>:</span> <span class=s2>&#34;American Samoa&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AD&#34;</span><span class=o>:</span> <span class=s2>&#34;Andorra&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AO&#34;</span><span class=o>:</span> <span class=s2>&#34;Angola&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AI&#34;</span><span class=o>:</span> <span class=s2>&#34;Anguilla&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AQ&#34;</span><span class=o>:</span> <span class=s2>&#34;Antarctica&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AG&#34;</span><span class=o>:</span> <span class=s2>&#34;Antigua and Barbuda&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AR&#34;</span><span class=o>:</span> <span class=s2>&#34;Argentina&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AM&#34;</span><span class=o>:</span> <span class=s2>&#34;Armenia&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AW&#34;</span><span class=o>:</span> <span class=s2>&#34;Aruba&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AU&#34;</span><span class=o>:</span> <span class=s2>&#34;Australia&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AT&#34;</span><span class=o>:</span> <span class=s2>&#34;Austria&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;AZ&#34;</span><span class=o>:</span> <span class=s2>&#34;Azerbaijan&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;BS&#34;</span><span class=o>:</span> <span class=s2>&#34;Bahamas&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;BH&#34;</span><span class=o>:</span> <span class=s2>&#34;Bahrain&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;BD&#34;</span><span class=o>:</span> <span class=s2>&#34;Bangladesh&#34;</span><span class=o>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;BB&#34;</span><span class=o>:</span> <span class=s2>&#34;Barbados&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>println</span> <span class=s2>&#34;m1 = $m1&#34;</span>
</span></span><span class=line><span class=cl><span class=n>println</span> <span class=s2>&#34;m1 is an instance of ${m1.getClass()}&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>m1</span><span class=o>[</span><span class=s2>&#34;BY&#34;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&#34;Belarus&#34;</span>
</span></span><span class=line><span class=cl><span class=n>println</span> <span class=s2>&#34;m1 = $m1&#34;</span>
</span></span></code></pre></div><p>只看一眼，你就会发现 Groovy 使用了 <code>def</code> 关键字而不是 <code>var</code> —— 尽管在<ruby>最近模型<rt>late-model</rt><ruby>的 Groovy（version 3+）中，使用 <code>var</code> 关键字也是可行的。</p><p>你还会发现，你是通过在括号里添加了一个键值对列表来创建一个 Map 的。不仅如此，这样创建的列表对象还非常有用，这里有几个原因。其一，它是可变的；其二，它是一个 <code>LinkedHashMap</code> 的实例，内部维持了数据的插入顺序。所以，当你运行 Java 版本的代码并打印出变量 <code>m3</code>，你会看到：</p><pre tabindex=0><code>m3 = {BB=Barbados, BD=Bangladesh, AD=Andorra, AF=Afghanistan, AG=Antigua and Barbuda, BH=Bahrain, AI=Anguilla, AL=Albania, AM=Armenia, AO=Angola, AQ=Antarctica, BS=Bahamas, AR=Argentina, AS=American Samoa, AT=Austria, AU=Australia, DZ=Algeria, AW=Aruba, AX=Åland Islands, AZ=Azerbaijan}
</code></pre><p>而当你运行 Groovy 版本的代码，你会看到：</p><pre tabindex=0><code>m1 = [AF:Afghanistan, AX:Åland Islands, AL:Albania, DZ:Algeria, AS:American Samoa, AD:Andorra, AO:Angola, AI:Anguilla, AQ:Antarctica, AG:Antigua and Barbuda, AR:Argentina, AM:Armenia, AW:Aruba, AU:Australia, AT:Austria, AZ:Azerbaijan, BS:Bahamas, BH:Bahrain, BD:Bangladesh, BB:Barbados]
</code></pre><p>再一次，你将看到 Groovy 是如何简化事情的。这样的语法非常直观，有点像 Python 里的字典，并且，即使你有一个超过 10 个键值对的初始列表，你也不需要去记住各种必要的别扭方式。注意我们使用的表达式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>m1</span><span class=o>[</span><span class=s2>&#34;BY&#34;</span><span class=o>]</span> <span class=o>=</span> <span class=s2>&#34;Belarus&#34;</span>
</span></span></code></pre></div><p>而在 Java 中，你需要这样做：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>m1</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;BY&#34;</span><span class=o>,</span> <span class=s>&#34;Belarus&#34;</span><span class=o>)</span>
</span></span></code></pre></div><p>还有，这个 Map 默认是可变的，这么做的利弊很难评判，还是得取决于你的需求是什么。我个人觉得，Java 在这种情况下的 “默认不可变” 机制，最让我困扰的地方是，它没有一个类似于 <code>Map.mutableOfMutableEntries()</code> 的方法。这迫使一些刚学会如何声明和初始化一个 Map 的程序员，不得不转念去思考该如何把他们手中不可变的 Map，转换为可变的。同时我也想问，创建一个不可变的对象然后再舍弃它，这样真的好吗？</p><p>另一个值得考虑的事情是，Groovy 使用方括号代替 Java 中的 <code>put()</code> 和 <code>get()</code> 方法来进行关键字查找。因此你可以这样写：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>m1</span><span class=o>[</span><span class=s2>&#34;ZZ&#34;</span><span class=o>]</span> <span class=o>=</span> <span class=n>m1</span><span class=o>[</span><span class=s2>&#34;BY&#34;</span><span class=o>]</span>
</span></span></code></pre></div><p>而不需要这样写：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>m1</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;ZZ&#34;</span><span class=o>,</span><span class=n>m1</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=s>&#34;BY&#34;</span><span class=o>))</span>
</span></span></code></pre></div><p>有时候，就像使用某个类的实例变量一样来使用 Map 中的关键字和值是一个好办法。设想你现在有一堆想要设置的属性，在 Groovy 中，它们看起来就像下面这样：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=kt>def</span> <span class=n>properties</span> <span class=o>=</span> <span class=o>[</span>
</span></span><span class=line><span class=cl>      <span class=nl>verbose:</span> <span class=kc>true</span><span class=o>,</span>
</span></span><span class=line><span class=cl>      <span class=nl>debug:</span> <span class=kc>false</span><span class=o>,</span>
</span></span><span class=line><span class=cl>      <span class=nl>logging:</span> <span class=kc>false</span><span class=o>]</span>
</span></span></code></pre></div><p>然后，你可以改变其中的某个属性，就像下面这样：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>properties</span><span class=o>.</span><span class=na>verbose</span> <span class=o>=</span> <span class=kc>false</span>
</span></span></code></pre></div><p>之所以这样能工作，是因为，只要关键字符合特定的规则，你就可以省略引号，然后直接用点操作符来代替方括号。尽管这个功能非常有用，也非常好用，它也同时也意味着，如果你要把一个变量作为一个 Map 的关键字来使用，你就必须把这个变量包裹在圆括号里，就像下面这样：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=kt>def</span> <span class=n>myMap</span> <span class=o>=</span> <span class=o>[(</span><span class=n>k1</span><span class=o>):</span> <span class=n>v1</span><span class=o>,</span> <span class=o>(</span><span class=n>k2</span><span class=o>):</span> <span class=n>v2</span><span class=o>]</span>
</span></span></code></pre></div><p>是时候告诉勤奋的读者 Groovy 是一门为编写脚本而量身定制的语言了。 Map 通常是脚本中的关键元素，它为脚本提供了<ruby>查找表<rt>lookup table</rt></ruby>，并且通常起到了作为内存数据库的作用。我在这里使用的例子是 ISO 3166 规定的两个字母的国家代码和国家名称。对在世界上各个国家的互联网使用者来说，这些代码是很熟悉的。此外，假设我们要编写一个从日志文件中查找互联网主机名，并借此来了解用户的地理位置分布的脚本工具，那么这些代码会是十分有用的部分。</p><h2 id=groovy-相关资源>Groovy 相关资源<a hidden class=anchor aria-hidden=true href=#groovy-相关资源>#</a></h2><p><a href=https://groovy-lang.org/ target=_blank rel="noopener noreferrer">Apache Groovy 网站</a>
上有非常多的文档。另一个很棒的 Groovy 资源是 <a href=https://blog.mrhaki.com/ target=_blank rel="noopener noreferrer">Mr. Haki</a>
。<a href=https://www.baeldung.com/ target=_blank rel="noopener noreferrer">Baeldung 网站</a>
提供了大量 Java 和 Groovy 的有用教程。学习 Groovy 还有一个很棒的原因，那就是可以接着学习 <a href=https://grails.org/ target=_blank rel="noopener noreferrer">Grails</a>
，后者是一个优秀的、高效率的全栈 Web 框架。它基于许多优秀组件构建而成，比如有 Hibernate、Spring Boot 和 Micronaut 等。</p><hr><blockquote><p>本文使用 <a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh target=_blank rel="noopener noreferrer">CC BY-SA 4.0 国际协议</a>
进行许可，欢迎<strong>遵照协议规定</strong>转载。<br>链接：<a href=https://lkxed.github.io/posts/creating-maps-groovy-java/ target=_blank rel="noopener noreferrer">https://lkxed.github.io/posts/creating-maps-groovy-java/</a><br>作者：<a href=https://opensource.com/users/clhermansen target=_blank rel="noopener noreferrer">Chris Hermansen</a>
/ 译者：<a href=https://github.com/lkxed/ target=_blank rel="noopener noreferrer">六开箱</a><br>原文：<a href=https://opensource.com/article/22/3/maps-groovy-vs-java target=_blank rel="noopener noreferrer">Creating and initializing maps in Groovy vs Java</a><br>首发：<a href=https://linux.cn/article-14378-1.html target=_blank rel="noopener noreferrer">在 Groovy 和 Java 中创建并初始化 Map 的不同</a>
@ <a href=https://linux.cn/ target=_blank rel="noopener noreferrer">Linux 中国</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://lkxed.github.io/tags/%E8%AF%91%E6%96%87/>译文</a></li><li><a href=https://lkxed.github.io/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/>编程语言</a></li><li><a href=https://lkxed.github.io/tags/groovy/>Groovy</a></li><li><a href=https://lkxed.github.io/tags/java/>Java</a></li><li><a href=https://lkxed.github.io/tags/%E6%95%99%E7%A8%8B/>教程</a></li></ul><nav class=paginav><a class=prev href=https://lkxed.github.io/posts/parsing-xml-java/><span class=title>« 上一页</span><br><span>使用 Java 解析 XML 文件</span></a>
<a class=next href=https://lkxed.github.io/posts/c4c-linux-distro-revived/><span class=title>下一页 »</span><br><span>C4C Ubuntu：基督教信徒的 Linux 发行版</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=lkxed/lkxed.github.io data-repo-id=R_kgDOHF00eA data-category=Announcements data-category-id=DIC_kwDOHF00eM4COXzh data-mapping=og:title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><div class=social-icons><a href=https://github.com/lkxed/ target=_blank rel="noopener noreferrer me" title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://space.bilibili.com/88033726/ target=_blank rel="noopener noreferrer me" title=Bilibili><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg"><rect x="1.3333" y="6" width="21.333" height="15.333" rx="4" ry="4"/><path d="m8 12.4v1.2"/><path d="m16 12.4v1.2"/><path d="m5.8853 2.6667L8.552 5.3334"/><path d="m18.115 2.6667-2.6667 2.6667"/></svg></a></div><span>&copy; 2022 <a href=https://lkxed.github.io/>六开箱</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/lkxed/hugo-PaperMod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="复制";function s(){e.innerText="已复制！",setTimeout(()=>{e.innerText="复制"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>