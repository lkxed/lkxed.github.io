<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²ï½œå…­å¼€ç®±</title><meta name=keywords content="Java,String,contains,indexOf,å­—ç¬¦ä¸²åŒ¹é…,KMP,æºç "><meta name=description content="Java çš„ String ç±»æ˜¯å¦‚ä½•æŸ¥æ‰¾æŸä¸ªç»™å®šçš„å­ä¸²çš„å‘¢ï¼Ÿå®ƒä½¿ç”¨äº† KMP ç®—æ³•å—ï¼Ÿ"><meta name=author content="å…­å¼€ç®±"><link rel=canonical href=https://lkxed.github.io/posts/java-string-search/><link crossorigin=anonymous href=/assets/css/stylesheet.min.09b98575a0a9c52a0dcff6660328188f9365049be8c47253f3072a85d10d82a5.css integrity="sha256-CbmFdaCpxSoNz/ZmAygYj5NlBJvoxHJT8wcqhdENgqU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://lkxed.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lkxed.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://lkxed.github.io/favicon-32x32.png><link rel=manifest href=https://lkxed.github.io/site.webmanifest><link rel=apple-touch-icon href=https://lkxed.github.io/apple-touch-icon.png><link rel=mask-icon href=https://lkxed.github.io/safari-pinned-tab.svg><meta name=theme-color content="#f5f5f5" media="(prefers-color-scheme: light)"><meta name=theme-color content="#1d1e20" media="(prefers-color-scheme: dark)"><meta name=msapplication-TileColor content="#ffffff"><noscript><style>.top-link{display:none}</style></noscript><meta name=shenma-site-verification content="0834e815906a93375245a759f409f8b0_1648880760"><meta name=baidu-site-verification content="code-2I1Hg4GETM"><meta name=google-site-verification content="QWaJU9oM7UFAshQEDkcyAZivnI9b6iIOR59kso4I_QE"><meta property="og:title" content="Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²"><meta property="og:description" content="Java çš„ String ç±»æ˜¯å¦‚ä½•æŸ¥æ‰¾æŸä¸ªç»™å®šçš„å­ä¸²çš„å‘¢ï¼Ÿå®ƒä½¿ç”¨äº† KMP ç®—æ³•å—ï¼Ÿ"><meta property="og:type" content="article"><meta property="og:url" content="https://lkxed.github.io/posts/java-string-search/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-10T23:11:25+08:00"><meta property="article:modified_time" content="2022-04-10T23:11:25+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²"><meta name=twitter:description content="Java çš„ String ç±»æ˜¯å¦‚ä½•æŸ¥æ‰¾æŸä¸ªç»™å®šçš„å­ä¸²çš„å‘¢ï¼Ÿå®ƒä½¿ç”¨äº† KMP ç®—æ³•å—ï¼Ÿ"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"æ–‡ç« ","item":"https://lkxed.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²","item":"https://lkxed.github.io/posts/java-string-search/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²","name":"Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²","description":"Java çš„ String ç±»æ˜¯å¦‚ä½•æŸ¥æ‰¾æŸä¸ªç»™å®šçš„å­ä¸²çš„å‘¢ï¼Ÿå®ƒä½¿ç”¨äº† KMP ç®—æ³•å—ï¼Ÿ","keywords":["Java","String","contains","indexOf","å­—ç¬¦ä¸²åŒ¹é…","KMP","æºç "],"articleBody":" Java çš„ String ç±»æ˜¯å¦‚ä½•æŸ¥æ‰¾æŸä¸ªç»™å®šçš„å­ä¸²çš„å‘¢ï¼Ÿå®ƒä½¿ç”¨äº† KMP ç®—æ³•å—ï¼Ÿ\n å‰è¨€ 2022 å¹´ 4 æœˆ 7 æ—¥çš„åŠ›æ‰£æ¯æ—¥ä¸€é¢˜æ˜¯ã€Œæ—‹è½¬å­—ç¬¦ä¸²ã€ï¼Œé¢˜ç›®æè¿°å¦‚ä¸‹ï¼š\n ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²ï¼šsÂ å’ŒÂ goalã€‚å¦‚æœåœ¨è‹¥å¹²æ¬¡æ—‹è½¬æ“ä½œä¹‹åï¼ŒsÂ èƒ½å˜æˆÂ goalÂ ï¼Œé‚£ä¹ˆè¿”å›Â trueã€‚ sÂ çš„ æ—‹è½¬æ“ä½œ å°±æ˜¯å°†Â s æœ€å·¦è¾¹çš„å­—ç¬¦ç§»åŠ¨åˆ°æœ€å³è¾¹ã€‚Â ä¾‹å¦‚ï¼šè‹¥Â s = 'abcde'ï¼Œåœ¨æ—‹è½¬ä¸€æ¬¡ä¹‹åç»“æœå°±æ˜¯ 'bcdea'ã€‚\n è¿™æ˜¯ä¸€é“ç®€å•é¢˜ï¼Œè¿ç”¨åˆ°çš„çŸ¥è¯†æ˜¯å­—ç¬¦ä¸²åŒ¹é…ã€‚æˆ‘ä½¿ç”¨äº†æš´åŠ›åŒ¹é…çš„æ–¹æ³•ï¼Œæ‰§è¡Œæ—¶é—´ç«Ÿç„¶è¶…è¿‡äº† 100% çš„æäº¤ã€‚æ­£åœ¨çº³é—·ï¼Œçœ‹äº† å®˜æ–¹é¢˜è§£ ï¼Œå®ƒæ›´æ˜¯äº†å¾—ï¼šç›´æ¥è°ƒç”¨äº† String ç±»çš„ contains æ–¹æ³•ã€‚\næˆ‘æ³¨æ„åˆ°ï¼Œå®˜æ–¹é¢˜è§£ä¸­æåˆ°è¯¥è§£æ³•ä½¿ç”¨äº† KMP ç®—æ³• ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚æˆ‘çš„æš´åŠ›ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ï¼Œè¶…è¿‡äº† 100%ï¼Œå®˜æ–¹é¢˜è§£ä½¿ç”¨ KMP ç®—æ³•ï¼Œä¹Ÿæ˜¯è¶…è¿‡äº† 100%ï¼Œè¿™è®©æˆ‘æœ‰äº›ç–‘æƒ‘ã€‚æˆ–è®¸æ˜¯å› ä¸ºæµ‹è¯•ç”¨ä¾‹æ•°æ®é‡ä¸å¤Ÿå¤§ï¼ŒåŒºåˆ†ä¸å‡ºæ•ˆç‡å§ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘ä»ç„¶å¯¹ contains æ–¹æ³•çš„å®ç°ç»†èŠ‚äº§ç”Ÿäº†å¥½å¥‡ï¼Œäºæ˜¯æœ‰äº†æœ¬æ–‡ã€‚\nä¸€æ¢ç©¶ç«Ÿ String ç±»çš„ contains æ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ª é©±åŠ¨æ–¹æ³•ï¼Œå®ƒå±‚å±‚ä¾èµ–äº indexOf æ–¹æ³•ã€‚ä¸‹é¢æ˜¯å®ƒçš„å®Œæ•´è°ƒç”¨é“¾ï¼š\n// 0 public boolean contains(CharSequence s) { return indexOf(s.toString())  -1; } // 1 public int indexOf(String str) { return indexOf(str, 0); } // 2 public int indexOf(String str, int fromIndex) { return indexOf( value, 0, value.length, str.value, 0, str.value.length, fromIndex); } // 3 static int indexOf(char[] source, int sourceOffset, int sourceCount, char[] target, int targetOffset, int targetCount, int fromIndex) { ... } å¯ä»¥çœ‹å‡ºï¼Œæ–¹æ³• 3 æ˜¯æœ€å…³é”®çš„ã€‚ä¸ºäº†ç®€åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠæ¯ä¸€æ­¥è°ƒç”¨çš„å‚æ•°ï¼ˆ0 å’Œ lengthï¼‰éƒ½å¸¦è¿›å»ï¼Œå¹¶å¿½ç•¥å‰é¢çš„é¢„å¤„ç†æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œæ–¹æ³• 3 å°±å¯ä»¥ç²¾ç®€ä¸ºï¼š\nstatic int indexOf(char[] source, int sourceCount, char[] target, int targetCount) { /* å¾…åŒ¹é…çš„é¦–ä¸ªå­—ç¬¦ */ char first = target[0]; /* éœ€è¦åŒ¹é…çš„å­—ç¬¦æ•° */ int max = sourceCount - targetCount; /* éå† sourceï¼ŒåŒ¹é… target */ for (int i = 0; i  max; i++) { /* åœ¨ source ä¸­å¯»æ‰¾ target çš„é¦–å­—ç¬¦ */ if (source[i] != first) { while (++i  max \u0026\u0026 source[i] != first); } /* æ‰¾åˆ°äº† target çš„é¦–å­—ç¬¦ï¼Œç»§ç»­åŒ¹é… target çš„å‰©ä½™å­—ç¬¦ */ if (i  max) { /* ä»ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é… */ int j = i + 1; /* è¿˜éœ€è¦ targetCount - 1 ä¸ªå­—ç¬¦ */ int end = j + targetCount - 1; /* ä¸€æ—¦æŸä¸ªå­—ç¬¦åŒ¹é…å¤±è´¥ï¼Œåˆ™è·³å‡ºå¾ªç¯ */ for (int k = 1; j  end \u0026\u0026 source[j] == target[k]; j++, k++); /* åŒ¹é…åˆ°äº† target ä¸­çš„æ‰€æœ‰å­—ç¬¦ */ if (j == end) { /* è¿”å›é¦–ä¸ªåŒ¹é…çš„ä½ç½® */ return i; } /* å¦åˆ™è¯´æ˜åªæ˜¯éƒ¨åˆ†åŒ¹é…ï¼Œç»§ç»­æµç¨‹ï¼Œé‡æ–°åœ¨ source ä¸­å¯»æ‰¾ target çš„é¦–ä¸ªå­—ç¬¦ */ } } /* ç›´åˆ°éå†å®Œ sourceï¼Œéƒ½æ²¡æœ‰åŒ¹é…åˆ° targetï¼Œæ­¤æ—¶è¿”å› -1ï¼Œè¡¨ç¤º target ä¸æ˜¯ source çš„å­ä¸² */ return -1; } ç–‘æƒ‘ä¸è§£ è¿™ä¸ª indexOf æ–¹æ³•å’Œæˆ‘è‡ªå·±å®ç°çš„åŒ¹é…ç®—æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œè¿™çœŸçš„æ˜¯ KMP ç®—æ³•å—ï¼Ÿ\næˆ‘å¾ˆæ€€ç–‘ã€‚æˆ‘ä¾ç¨€è®°å¾— KMP ç®—æ³•æ˜¯éœ€è¦ä¸€ä¸ª next æ•°ç»„çš„ã€‚\næç„¶å¤§æ‚Ÿ å›è¿‡å¤´å»çœ‹å®˜æ–¹é¢˜è§£ï¼Œå®ƒçš„åŸè¯æ˜¯ï¼š\n æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚KMP ç®—æ³•æœç´¢å­å­—ç¬¦ä¸²çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œå…¶ä»–æœç´¢å­å­—ç¬¦ä¸²çš„æ–¹æ³•ä¼šç•¥æœ‰å·®å¼‚ã€‚\n æˆ‘æ˜ç™½äº†ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œæœ€ä¼˜ç§€çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•æ˜¯ KMPï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚\nç”±äºæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ KMP ç®—æ³•æ¥å®ç°ï¼Œå› æ­¤ä¼°ç®—æ—¶é—´å¤æ‚åº¦æ—¶é»˜è®¤é‡‡ç”¨äº†æœ€ä¼˜çš„ç®—æ³•ã€‚\nå¹¶ä¸ç­‰äºè¯´ï¼Œå®ƒçš„å‚è€ƒä»£ç æ˜¾å¼/éšå¼åœ°ä½¿ç”¨äº† KMP ç®—æ³•â€¦â€¦\nè¿™ä¹ˆä¸€æ¥ï¼Œæˆ‘çš„æš´åŠ›è§£æ³•ä¹Ÿèƒ½å¤Ÿè¶…è¿‡ 100% å°±å¯ä»¥ç†è§£äº†ã€‚æƒ³å¿…æ˜¯å› ä¸ºè¿™æ˜¯é“ç®€å•é¢˜ï¼Œè€ƒå¯Ÿçš„é‡ç‚¹ä¸æ˜¯å­—ç¬¦ä¸²åŒ¹é…ï¼Œè€Œæ˜¯å¦‚ä½•æ¨¡æ‹Ÿå­—ç¬¦ä¸²ã€Œæ—‹è½¬ã€æ“ä½œå§ã€‚\nåè¯­ æ„Ÿè§‰è¿™ç¯‡æ–‡ç« çš„èµ·æ‰¿è½¬åˆæœ‰äº›è¥é”€å·çš„å‘³é“ï¼Ÿå¥½å§ï¼Œæˆ‘ä¹Ÿè§‰å¾—â€¦â€¦ä½†æ˜¯è¿™ç¡®å®å°±æ˜¯æˆ‘çš„æ¢ç´¢è¿‡ç¨‹ï¼ˆè¯´æ˜æˆ‘å¤ªèœäº†ï¼‰ã€‚\næœ€ä¸»è¦çš„ç›®çš„å½“ç„¶æ˜¯åˆ†äº«ä¸€ä¸‹ String ç±»çš„ contains å’Œ indexOf æºç å•¦ï¼Œå¸Œæœ›è‡ªå·±å’Œè¯»è€…éƒ½èƒ½æœ‰äº›æ”¶è·å§ã€‚\n  è½¬è½½é¡»çŸ¥ï¼šæœ¬æ–‡éµå¾ª CC BY-SA 4.0 è®¸å¯åè®® ä½œè€…ï¼šå…­å¼€ç®± é“¾æ¥ï¼šhttps://lkxed.github.io/posts/java-string-search/  ","wordCount":"1361","inLanguage":"zh","datePublished":"2022-04-10T23:11:25+08:00","dateModified":"2022-04-10T23:11:25+08:00","author":{"@type":"Person","name":"å…­å¼€ç®±"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lkxed.github.io/posts/java-string-search/"},"publisher":{"@type":"Organization","name":"å…­å¼€ç®±","logo":{"@type":"ImageObject","url":"https://lkxed.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://lkxed.github.io/ accesskey=h title="å…­å¼€ç®± (Alt + H)"><img src=https://lkxed.github.io/favicon.ico alt=logo aria-label=logo height=30>å…­å¼€ç®±</a></div><ul id=menu><li><a href=https://lkxed.github.io/posts/ title=æ–‡ç« ><span>æ–‡ç« </span></a></li><li><a href=https://lkxed.github.io/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://lkxed.github.io/series/ title=ç³»åˆ—><span>ç³»åˆ—</span></a></li><li><a href=https://lkxed.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://lkxed.github.io/search/ title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Java String æºç é˜…è¯»ï¼šæŸ¥æ‰¾å­ä¸²</h1><div class=post-meta><span title="2022-04-10 23:11:25 +0800 CST">2022 å¹´ 4 æœˆ 10 æ—¥</span>&nbsp;Â·&nbsp;1361 å­—&nbsp;Â·&nbsp;å…­å¼€ç®±&nbsp;ï½œ&nbsp;<a href=https://github.com/lkxed/ rel="noopener noreferrer" target=_blank>å…³æ³¨æˆ‘ğŸŒŸ</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=å‰è¨€>å‰è¨€</a></li><li><a href=#%e4%b8%80%e6%8e%a2%e7%a9%b6%e7%ab%9f aria-label=ä¸€æ¢ç©¶ç«Ÿ>ä¸€æ¢ç©¶ç«Ÿ</a></li><li><a href=#%e7%96%91%e6%83%91%e4%b8%8d%e8%a7%a3 aria-label=ç–‘æƒ‘ä¸è§£>ç–‘æƒ‘ä¸è§£</a></li><li><a href=#%e6%81%8d%e7%84%b6%e5%a4%a7%e6%82%9f aria-label=æç„¶å¤§æ‚Ÿ>æç„¶å¤§æ‚Ÿ</a></li><li><a href=#%e5%90%8e%e8%af%ad aria-label=åè¯­>åè¯­</a></li></ul></div></details></div><div class=post-content><blockquote><p>Java çš„ <code>String</code> ç±»æ˜¯å¦‚ä½•æŸ¥æ‰¾æŸä¸ªç»™å®šçš„å­ä¸²çš„å‘¢ï¼Ÿå®ƒä½¿ç”¨äº† KMP ç®—æ³•å—ï¼Ÿ</p></blockquote><h2 id=å‰è¨€>å‰è¨€<a hidden class=anchor aria-hidden=true href=#å‰è¨€>#</a></h2><p>2022 å¹´ 4 æœˆ 7 æ—¥çš„åŠ›æ‰£æ¯æ—¥ä¸€é¢˜æ˜¯ã€Œæ—‹è½¬å­—ç¬¦ä¸²ã€ï¼Œé¢˜ç›®æè¿°å¦‚ä¸‹ï¼š</p><blockquote><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š<code>s</code>Â å’ŒÂ <code>goal</code>ã€‚å¦‚æœåœ¨è‹¥å¹²æ¬¡æ—‹è½¬æ“ä½œä¹‹åï¼Œ<code>s</code>Â èƒ½å˜æˆÂ <code>goal</code>Â ï¼Œé‚£ä¹ˆè¿”å›Â <code>true</code>ã€‚
<code>s</code>Â çš„ <strong>æ—‹è½¬æ“ä½œ</strong> å°±æ˜¯å°†Â <code>s</code> æœ€å·¦è¾¹çš„å­—ç¬¦ç§»åŠ¨åˆ°æœ€å³è¾¹ã€‚Â 
ä¾‹å¦‚ï¼šè‹¥Â <code>s = 'abcde'</code>ï¼Œåœ¨æ—‹è½¬ä¸€æ¬¡ä¹‹åç»“æœå°±æ˜¯ <code>'bcdea'</code>ã€‚</p></blockquote><p>è¿™æ˜¯ä¸€é“ç®€å•é¢˜ï¼Œè¿ç”¨åˆ°çš„çŸ¥è¯†æ˜¯å­—ç¬¦ä¸²åŒ¹é…ã€‚æˆ‘ä½¿ç”¨äº†æš´åŠ›åŒ¹é…çš„æ–¹æ³•ï¼Œæ‰§è¡Œæ—¶é—´ç«Ÿç„¶è¶…è¿‡äº† 100% çš„æäº¤ã€‚æ­£åœ¨çº³é—·ï¼Œçœ‹äº† <a href=https://leetcode-cn.com/problems/rotate-string/solution/xuan-zhuan-zi-fu-chuan-by-leetcode-solut-4hlp/ target=_blank rel="noopener noreferrer">å®˜æ–¹é¢˜è§£</a>
ï¼Œå®ƒæ›´æ˜¯äº†å¾—ï¼šç›´æ¥è°ƒç”¨äº† <code>String</code> ç±»çš„ <code>contains</code> æ–¹æ³•ã€‚</p><p>æˆ‘æ³¨æ„åˆ°ï¼Œå®˜æ–¹é¢˜è§£ä¸­æåˆ°è¯¥è§£æ³•ä½¿ç”¨äº† <a href=https://zh.wikipedia.org/wiki/KMP%e7%ae%97%e6%b3%95 target=_blank rel="noopener noreferrer">KMP ç®—æ³•</a>
ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚æˆ‘çš„æš´åŠ›ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n<sup>2</sup>)ï¼Œè¶…è¿‡äº† 100%ï¼Œå®˜æ–¹é¢˜è§£ä½¿ç”¨ KMP ç®—æ³•ï¼Œä¹Ÿæ˜¯è¶…è¿‡äº† 100%ï¼Œè¿™è®©æˆ‘æœ‰äº›ç–‘æƒ‘ã€‚æˆ–è®¸æ˜¯å› ä¸ºæµ‹è¯•ç”¨ä¾‹æ•°æ®é‡ä¸å¤Ÿå¤§ï¼ŒåŒºåˆ†ä¸å‡ºæ•ˆç‡å§ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘ä»ç„¶å¯¹ <code>contains</code> æ–¹æ³•çš„å®ç°ç»†èŠ‚äº§ç”Ÿäº†å¥½å¥‡ï¼Œäºæ˜¯æœ‰äº†æœ¬æ–‡ã€‚</p><h2 id=ä¸€æ¢ç©¶ç«Ÿ>ä¸€æ¢ç©¶ç«Ÿ<a hidden class=anchor aria-hidden=true href=#ä¸€æ¢ç©¶ç«Ÿ>#</a></h2><p><code>String</code> ç±»çš„ <code>contains</code> æ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ª <strong>é©±åŠ¨æ–¹æ³•</strong>ï¼Œå®ƒå±‚å±‚ä¾èµ–äº <code>indexOf</code> æ–¹æ³•ã€‚ä¸‹é¢æ˜¯å®ƒçš„å®Œæ•´è°ƒç”¨é“¾ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>CharSequence</span> <span class=n>s</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>s</span><span class=o>.</span><span class=na>toString</span><span class=o>())</span> <span class=o>&gt;</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>str</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span>    <span class=n>value</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span>     <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>                   <span class=n>str</span><span class=o>.</span><span class=na>value</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=n>str</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span><span class=o>,</span> <span class=n>fromIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>static</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=kt>char</span><span class=o>[]</span> <span class=n>source</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sourceOffset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sourceCount</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                   <span class=kt>char</span><span class=o>[]</span> <span class=n>target</span><span class=o>,</span> <span class=kt>int</span> <span class=n>targetOffset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>targetCount</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                                                    <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>å¯ä»¥çœ‹å‡ºï¼Œæ–¹æ³• 3 æ˜¯æœ€å…³é”®çš„ã€‚ä¸ºäº†ç®€åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠæ¯ä¸€æ­¥è°ƒç”¨çš„å‚æ•°ï¼ˆ<code>0</code> å’Œ <code>length</code>ï¼‰éƒ½å¸¦è¿›å»ï¼Œå¹¶å¿½ç•¥å‰é¢çš„é¢„å¤„ç†æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œæ–¹æ³• 3 å°±å¯ä»¥ç²¾ç®€ä¸ºï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>static</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=kt>char</span><span class=o>[]</span> <span class=n>source</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sourceCount</span><span class=o>,</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>target</span><span class=o>,</span> <span class=kt>int</span> <span class=n>targetCount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* å¾…åŒ¹é…çš„é¦–ä¸ªå­—ç¬¦ */</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>first</span> <span class=o>=</span> <span class=n>target</span><span class=o>[</span><span class=n>0</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* éœ€è¦åŒ¹é…çš„å­—ç¬¦æ•° */</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>sourceCount</span> <span class=o>-</span> <span class=n>targetCount</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/* éå† sourceï¼ŒåŒ¹é… target */</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>max</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=cm>/* åœ¨ source ä¸­å¯»æ‰¾ target çš„é¦–å­—ç¬¦ */</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>source</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>first</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=o>(++</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>max</span> <span class=o>&amp;&amp;</span> <span class=n>source</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>first</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=cm>/* æ‰¾åˆ°äº† target çš„é¦–å­—ç¬¦ï¼Œç»§ç»­åŒ¹é… target çš„å‰©ä½™å­—ç¬¦ */</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>max</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* ä»ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é… */</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* è¿˜éœ€è¦ targetCount - 1 ä¸ªå­—ç¬¦ */</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>end</span> <span class=o>=</span> <span class=n>j</span> <span class=o>+</span> <span class=n>targetCount</span> <span class=o>-</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* ä¸€æ—¦æŸä¸ªå­—ç¬¦åŒ¹é…å¤±è´¥ï¼Œåˆ™è·³å‡ºå¾ªç¯ */</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>end</span> <span class=o>&amp;&amp;</span> <span class=n>source</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>==</span> <span class=n>target</span><span class=o>[</span><span class=n>k</span><span class=o>];</span> <span class=n>j</span><span class=o>++,</span> <span class=n>k</span><span class=o>++);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=cm>/* åŒ¹é…åˆ°äº† target ä¸­çš„æ‰€æœ‰å­—ç¬¦ */</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>j</span> <span class=o>==</span> <span class=n>end</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=cm>/* è¿”å›é¦–ä¸ªåŒ¹é…çš„ä½ç½® */</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* å¦åˆ™è¯´æ˜åªæ˜¯éƒ¨åˆ†åŒ¹é…ï¼Œç»§ç»­æµç¨‹ï¼Œé‡æ–°åœ¨ source ä¸­å¯»æ‰¾ target çš„é¦–ä¸ªå­—ç¬¦ */</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* ç›´åˆ°éå†å®Œ sourceï¼Œéƒ½æ²¡æœ‰åŒ¹é…åˆ° targetï¼Œæ­¤æ—¶è¿”å› -1ï¼Œè¡¨ç¤º target ä¸æ˜¯ source çš„å­ä¸² */</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>-</span><span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=ç–‘æƒ‘ä¸è§£>ç–‘æƒ‘ä¸è§£<a hidden class=anchor aria-hidden=true href=#ç–‘æƒ‘ä¸è§£>#</a></h2><p>è¿™ä¸ª <code>indexOf</code> æ–¹æ³•å’Œæˆ‘è‡ªå·±å®ç°çš„åŒ¹é…ç®—æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œè¿™çœŸçš„æ˜¯ KMP ç®—æ³•å—ï¼Ÿ</p><p>æˆ‘å¾ˆæ€€ç–‘ã€‚æˆ‘ä¾ç¨€è®°å¾— KMP ç®—æ³•æ˜¯éœ€è¦ä¸€ä¸ª <code>next</code> æ•°ç»„çš„ã€‚</p><h2 id=æç„¶å¤§æ‚Ÿ>æç„¶å¤§æ‚Ÿ<a hidden class=anchor aria-hidden=true href=#æç„¶å¤§æ‚Ÿ>#</a></h2><p>å›è¿‡å¤´å»çœ‹å®˜æ–¹é¢˜è§£ï¼Œå®ƒçš„åŸè¯æ˜¯ï¼š</p><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚KMP ç®—æ³•æœç´¢å­å­—ç¬¦ä¸²çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œå…¶ä»–æœç´¢å­å­—ç¬¦ä¸²çš„æ–¹æ³•ä¼šç•¥æœ‰å·®å¼‚ã€‚</p></blockquote><p>æˆ‘æ˜ç™½äº†ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œæœ€ä¼˜ç§€çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•æ˜¯ KMPï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p><p>ç”±äºæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ KMP ç®—æ³•æ¥å®ç°ï¼Œå› æ­¤ä¼°ç®—æ—¶é—´å¤æ‚åº¦æ—¶é»˜è®¤é‡‡ç”¨äº†æœ€ä¼˜çš„ç®—æ³•ã€‚</p><p>å¹¶ä¸ç­‰äºè¯´ï¼Œå®ƒçš„å‚è€ƒä»£ç æ˜¾å¼/éšå¼åœ°ä½¿ç”¨äº† KMP ç®—æ³•&mldr;&mldr;</p><p>è¿™ä¹ˆä¸€æ¥ï¼Œæˆ‘çš„æš´åŠ›è§£æ³•ä¹Ÿèƒ½å¤Ÿè¶…è¿‡ 100% å°±å¯ä»¥ç†è§£äº†ã€‚æƒ³å¿…æ˜¯å› ä¸ºè¿™æ˜¯é“ç®€å•é¢˜ï¼Œè€ƒå¯Ÿçš„é‡ç‚¹ä¸æ˜¯å­—ç¬¦ä¸²åŒ¹é…ï¼Œè€Œæ˜¯å¦‚ä½•æ¨¡æ‹Ÿå­—ç¬¦ä¸²ã€Œæ—‹è½¬ã€æ“ä½œå§ã€‚</p><h2 id=åè¯­>åè¯­<a hidden class=anchor aria-hidden=true href=#åè¯­>#</a></h2><p>æ„Ÿè§‰è¿™ç¯‡æ–‡ç« çš„èµ·æ‰¿è½¬åˆæœ‰äº›è¥é”€å·çš„å‘³é“ï¼Ÿå¥½å§ï¼Œæˆ‘ä¹Ÿè§‰å¾—&mldr;&mldr;ä½†æ˜¯è¿™ç¡®å®å°±æ˜¯æˆ‘çš„æ¢ç´¢è¿‡ç¨‹ï¼ˆè¯´æ˜æˆ‘å¤ªèœäº†ï¼‰ã€‚</p><p>æœ€ä¸»è¦çš„ç›®çš„å½“ç„¶æ˜¯åˆ†äº«ä¸€ä¸‹ <code>String</code> ç±»çš„ <code>contains</code> å’Œ <code>indexOf</code> æºç å•¦ï¼Œå¸Œæœ›è‡ªå·±å’Œè¯»è€…éƒ½èƒ½æœ‰äº›æ”¶è·å§ã€‚</p><hr><blockquote><p>è½¬è½½é¡»çŸ¥ï¼šæœ¬æ–‡éµå¾ª <a href=https://creativecommons.org/licenses/by-sa/4.0/deed.zh target=_blank rel="noopener noreferrer">CC BY-SA 4.0 è®¸å¯åè®®</a><br>ä½œè€…ï¼š<a href=https://github.com/lkxed/ target=_blank rel="noopener noreferrer">å…­å¼€ç®±</a><br>é“¾æ¥ï¼š<a href=https://lkxed.github.io/posts/java-string-search/ target=_blank rel="noopener noreferrer">https://lkxed.github.io/posts/java-string-search/</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://lkxed.github.io/tags/java/>Java</a></li><li><a href=https://lkxed.github.io/tags/string/>String</a></li><li><a href=https://lkxed.github.io/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/>æºç é˜…è¯»</a></li></ul><nav class=paginav><a class=prev href=https://lkxed.github.io/posts/about-its-intentions/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>å…³äºã€Œå…­å¼€ç®±ã€ï¼šè¯ç”Ÿä¸åˆè¡·</span></a>
<a class=next href=https://lkxed.github.io/posts/archives-files-linux-ark-kde/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>KDE Arkï¼šå®‰è£…ä¸ä½¿ç”¨</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=lkxed/lkxed.github.io data-repo-id=R_kgDOHF00eA data-category=Announcements data-category-id=DIC_kwDOHF00eM4COXzh data-mapping=og:title data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><div class=social-icons><a href=https://github.com/lkxed/ target=_blank rel="noopener noreferrer me" title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://space.bilibili.com/88033726/ target=_blank rel="noopener noreferrer me" title=Bilibili><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" xmlns="http://www.w3.org/2000/svg"><rect x="1.3333" y="6" width="21.333" height="15.333" rx="4" ry="4"/><path d="m8 12.4v1.2"/><path d="m16 12.4v1.2"/><path d="m5.8853 2.6667L8.552 5.3334"/><path d="m18.115 2.6667-2.6667 2.6667"/></svg></a></div><span>&copy; 2022 <a href=https://lkxed.github.io/>å…­å¼€ç®±</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/lkxed/hugo-PaperMod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="å¤åˆ¶";function s(){e.innerText="å·²å¤åˆ¶ï¼",setTimeout(()=>{e.innerText="å¤åˆ¶"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>